<body>
<h1>等候跳轉中</h1>
<script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
<script>
    function initializeLiff(myLiffId) {
        liff
            .init({
                liffId: myLiffId,
            })
            .then(() => {
                if (!liff.isLoggedIn()) {
                    liff.login();
                }
            })
            .catch(err => {
                alert(`error: ${JSON.stringify(err)}`);
            });
    }

    document.addEventListener('DOMContentLoaded', () => {
        fetch(`/send-id`)
            .then(reqResponse => reqResponse.json())
            .then(jsonResponse => {
                let myLiffId = jsonResponse.id;
                initializeLiff(myLiffId);
            })
            .catch(err => {
                alert(`error: ${JSON.stringify(err)}`);
            });
    });
</script>
</body>